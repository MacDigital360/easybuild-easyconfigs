# This easyconfig was created by the BEAR Software team at the University of Birmingham.
easyblock = 'MakeCp'

name = 'Scalpel'
version = '0.5.4'

homepage = "http://scalpel.sourceforge.net/"
description = """Scalpel is a software package for detecting INDELs (INsertions and DELetions) 
mutations in a reference genome which has been sequenced with next-generation sequencing technology (e.g., Illumina)."""

toolchain = {'name': 'GCCcore', 'version': '8.3.0'}

source_urls = [SOURCEFORGE_SOURCE]
sources = ['%(namelower)s-%(version)s.tar.gz']
checksums = ['506f731b3886def158c15fd8b74fa98390f304a507d2040972e6b09ddefac8f0']

builddependencies = [
    ('binutils', '2.32'),
    ('CMake', '3.15.3')
]

dependencies = [
    ('Perl', '5.30.0'),
]

files_to_copy = ['samtools-1.1', 'Microassembler', 'bamtools-2.3.0', 'bcftools-1.1', 'MLDBM', 'Text', 'Parallel',
                 'FindSomatic.pl', 'HashesIO.pm', 'MLDBM.pm', 'scalpel-export', 'Utils.pm', 'FindDenovos.pl',
                 'FindVariants.pl', 'LICENSE', 'MANUAL', 'README', 'scalpel-discovery', 'SequenceIO.pm',
                 'Usage.pm', ]

fix_perl_shebang_for = ['%%(namelower)s%%(version)s/%s' % x for x in ['FindDenovos.pl', 'FindVariants.pl',
                                                                      'FindSomatic.pl', 'bcftools-1.1/vcfutils.pl']]

modextrapaths = {'PATH': ['', 'samtools-1.1', 'bcftools-1.1']}

sanity_check_paths = {
    'files': [
        'FindSomatic.pl', 'HashesIO.pm', 'MLDBM.pm', 'scalpel-export', 'Utils.pm',
        'FindDenovos.pl', 'FindVariants.pl', 'LICENSE', 'MANUAL', 'README',
        'scalpel-discovery', 'SequenceIO.pm', 'Usage.pm', 'samtools-1.1/samtools',
        'bcftools-1.1/vcfutils.pl', 'bamtools-2.3.0/lib/libbamtools.so',
        'bamtools-2.3.0/lib/libbamtools.so.2.3.0',
    ],
    'dirs': ['bamtools-2.3.0', 'Microassembler', 'bcftools-1.1', 'samtools-1.1', 'MLDBM', 'Parallel', 'Text'],
}

moduleclass = 'bio'
